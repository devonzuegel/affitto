(function(){ABM.FirebaseUI=function(){function t(t,e,s){var i,n,o,l;this.fbname=t,this.model=e,this.ui=s,this.fb=new Firebase(this.fbname),this.refs={},n=this.ui;for(i in n)l=n[i],this.refs[i]=this.fb.child(i);this.vals={},o=this.ui;for(i in o)l=o[i],this.vals[i]=l.val;this.resetModel(),this.fb.set(this.ui,function(t){return console.log(null!=t?"FB error: "+t:"FB ready")}),this.fb.on("child_changed",function(t){return function(e){return console.log("childChange",e.name(),e.val().val),t.setModelValue(e.name(),e.val().val)}}(this)),console.log("--- Firebase setup")}return t.prototype.setModelValue=function(t,e){var s;if(console.log("setModelValue: "+t+", "+e),this.vals[t]=e,"button"===this.ui[t].type){if(!e)return;this.setUIValue(t,!1)}return null!=(s=this.ui[t].setter)?this.model[s](e):this.model[t]=e},t.prototype.setUIValue=function(t,e,s){return null==s&&(s=!1),console.log("setUIValue: "+t+", "+e+", "+s),this.refs[t].child("val")[s?"push":"set"](e)},t.prototype.getUIValue=function(t){return this.vals[t]},t.prototype.resetModel=function(){var t,e,s,i;e=this.ui,s=[];for(t in e)i=e[t],"button"!==i.type&&s.push(this.setModelValue(t,i.val));return s},t.prototype.resetUI=function(){var t,e,s,i;e=this.ui,s=[];for(t in e)i=e[t],"button"!==i.type&&s.push(this.setUIValue(t,i.val));return s},t}()}).call(this);